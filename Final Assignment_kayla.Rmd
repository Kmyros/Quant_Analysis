---
title: "Homeownership Burden and Real Estate Market Activity"
author: "Kayla Myros, Claire Tham, Khalil Kaba"
date: "12/13/2021"
output: 
  html_document:
        theme: united
        toc: true
        toc_float: true
        
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Introduction (define research question, explain its importance, describe hypothesis you're testing)


**Research Question**

What effect does areas with a higher proportion of housing burdens households have on the housing real estate market? 

**Hypothesis** 

In Metropolitan Statistical Areas where there are higher incidences of home ownership cost burden is there a lower Median Sales Price of homes? 

**Why study this**

DRAFT TEXT >>>>> Help explain why some housing markets are "hot".... Disparities between areas with low burdens and high burdens... Do higher burdened areas mean that the housing market is more expensive, and, if so, would that have any social equity impacts? 


# Background

Housing costs burden is defined as households who spend more than 30% of their income on housing costs (Urban Institute, Housing and Finance Policy Center, 2021). Cost burdened households face more precarious situations and fluctuations in income could put them at risk for losing their home whether they are renters or homeowners. Predominantly, lower income households tend to be the most housing cost burdened among home owners (Olsen, 2007). For example, the recessions of the 21st century have challenged affordability and placed many homeowners in precarious situations when their incomes changed.  

Under the real estate domain, it has also been established that transaction volume is an indicator whether demand has been rising and can be a precursor to rising prices (Norm & Michael, 1986). Ultimately, housing cost burdens results in a significant barrier to housing affordability in the United States of America, despite the fact that home ownership encourages wealth creation and forms a basis of financial security. (Goodman and Mayer, 2018)

Given the relationship between prices and transaction volume, is it possible that prices and transaction volume vary based on characteristics in the market? Specifically, how do markets that have a higher rate of housing  burdened households differ than markets that have less. Perhaps  there demographic differences or number of houses for sale in the market. These questions build on existing research to assess potential relationships between these variables. 


```{r, echo = FALSE, message = FALSE, warning = FALSE}
library(tidyverse)
library(tidycensus)
library(readxl)
library(knitr)
library(tigris)
library(sf)
library(dplyr)
library(gridExtra)
library(jtools)
library(huxtable)
library(ggplot2)





library(interactions)
```


# Data



#### Categorical Variables

Our team created the following categorical variables using the U.S. Census Bureau, American Community Survey 1-year estimates data. 


*Median Household Income, 2019* Data of median household income for each Metropolitan Statistical Area categorized into "high" and "low" categories. High median income is any incomes greater than 55,000 dollars, Low median income is equal to or less than 55,000 dollars. 



*Mortgage Cost Burden, 2019* Mortgage cost burden data is defined as the percentage of the population within the Metropolitan Statistical Area that are homeowners with a mortgage who spend 30 percent or more of their income on their mortgage cost. The variable is defined as a category of a highly burdened area and less burdened area.
Highly burdened means 30 percent or more of the mortgaged homeowner population are housing burdened. While less burdened means fewer than 30 percent of the mortgaged homeowner population are housing burdened. 



#### Continious Variables

Our team identified the following continuous variables from the Zillow research data center. 

*For Sale Inventory, 2021* This data shows the number of homes on the housing market per the Metropolitan Statistical Area.It is reported monthly. 

*Median Sales Price, 2021* This data shows the median sales price of homes sold on the housing market within the specific Metropolitan Statistical Area. It is reported monthly. 

*Median List Price, 2021* This data shows the median listing price of homes on the housing market within the specific Metropolitan Statistical Area.This is what the property owner is asking for the home. This data is reported monthly. 



```{r, echo = FALSE, message = FALSE}

Median_HH_Income <- read_excel("2019_medianHHincome.xlsx") %>%
  mutate(MedIncome_Quality = ifelse(Med_Income > 55000, "High", "Low"))



Mortgage_Burden <- read_excel("MortgageBurden_MSA_2019_1yr.xlsx") %>%
    mutate(MortBurd_Quality = ifelse(Pct_MortBurden > .30, "HighlyBurdened", "LessBurdened"))
    colnames(Mortgage_Burden)[2] <- c("RegionName")
    



ForSale_Inventory <- read_excel("MSA_For Sale Inventory.xlsx")


Med_Sale_Price <- read_excel("MSA_Med Sale Price.xlsx")
  colnames(Med_Sale_Price)[14] <- c("SaleP_Sep")


Median_List_Price <- read_excel("MSA_Median List Price.xlsx")
  Median_List_Price <- Median_List_Price[ -c(1,2,4:49) ]
  colnames(Median_List_Price)[2] <- c("listP_Sep")


```

#### Matching the Census Data MSA to the Zillow Data MSA 

Initially our datasets only matched by 25 MSAs out of approximately 300 available. There were two issues, the Zillow data sets had only 95 MSAs compared to the 300 listed by the Census Bureau. The second issue, was that the syntax between the data set varied slightly. We used the gsub function to rename the Census Data variables to match the Zillow data MSA variables. 

```{r, echo = FALSE, message = FALSE}

Median_HH_Income$RegionName <- gsub("Albany-Schenectady-Troy, NY", "Albany, NY", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Allentown-Bethlehem-Easton, PA-NJ", "Allentown, PA", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Atlanta-Sandy Springs-Alpharetta, GA", "Atlanta, GA", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Austin-Round Rock-Georgetown, TX", "	Austin, TX", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Baltimore-Columbia-Towson, MD", "Baltimore, MD", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Birmingham-Hoover, AL", "Birmingham, AL", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Boston-Cambridge-Newton, MA-NH", "Boston, MA", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Buffalo-Cheektowaga, NY", "Buffalo, NY", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Charleston-North Charleston, SC", "Charleston, SC", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Charlotte-Concord-Gastonia, NC-SC", "Charlotte, NC", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Chicago-Naperville-Elgin, IL-IN-WI", "Chicago, IL", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Cincinnati, OH-KY-IN", "Cincinnati, OH", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Cleveland-Elyria, OH", "Cleveland, OH", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Dallas-Fort Worth-Arlington, TX", "Dallas-Fort Worth, TX", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Dayton-Kettering, OH", "Dayton, OH", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Deltona-Daytona Beach-Ormond Beach, FL", "Daytona Beach, FL", Median_HH_Income$RegionName)

Median_HH_Income$RegionName <- gsub("Denver-Aurora-Lakewood, CO", "Denver, CO", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Des Moines-West Des Moines, IA", "Des Moines, IA", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Detroit-Warren-Dearborn, MI", "Detroit, MI", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Durham-Chapel Hill, NC", "Durham, NC", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Grand Rapids-Kentwood, MI", "Grand Rapids, MI", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Greensboro-High Point, NC", "Greensboro, NC", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Greenville-Anderson, SC", "Greenville, SC", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Hartford-East Hartford-Middletown, CT", "Hartford, CT", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Houston-The Woodlands-Sugar Land, TX", "Houston, TX", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Indianapolis-Carmel-Anderson, IN", "Indianapolis, IN", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Las Vegas-Henderson-Paradise, NV", "Las Vegas, NV", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Little Rock-North Little Rock-Conway, AR", "Little Rock, AR", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Louisville/Jefferson County, KY-IN", "Louisville-Jefferson County, KY", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Memphis, TN-MS-AR", "Memphis, TN", Median_HH_Income$RegionName)

Median_HH_Income$RegionName <- gsub("Memphis, TN-MS-AR", "Memphis, TN", Median_HH_Income$RegionName)

Median_HH_Income$RegionName <- gsub("Miami-Fort Lauderdale-Pompano Beach, FL", "Miami-Fort Lauderdale, FL", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Milwaukee-Waukesha, WI", "Milwaukee, WI", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Minneapolis-St. Paul-Bloomington, MN-WI", "Minneapolis-St Paul, MN", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Nashville-Davidson--Murfreesboro--Franklin, TN", "Nashville, TN", Median_HH_Income$RegionName)

Median_HH_Income$RegionName <- gsub("New Haven-Milford, CT", "New Haven, CT", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("New Orleans-Metairie, LA", "New Orleans, LA", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("New York-Newark-Jersey City, NY-NJ-PA", "New York, NY", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Ogden-Clearfield, UT", "Ogden, UT", Median_HH_Income$RegionName)

Median_HH_Income$RegionName <- gsub("Omaha-Council Bluffs, NE-IA", "Omaha, NE", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Orlando-Kissimmee-Sanford, FL", "Orlando, FL", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Philadelphia-Camden-Wilmington, PA-NJ-DE-MD", "Philadelphia, PA", Median_HH_Income$RegionName)

Median_HH_Income$RegionName <- gsub("Phoenix-Mesa-Chandler, AZ", "Phoenix, AZ", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Portland-South Portland, ME", "Portland, ME", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Providence-Warwick, RI-MA", "Providence, RI", Median_HH_Income$RegionName)

Median_HH_Income$RegionName <- gsub("Raleigh-Cary, NC", "Raleigh, NC", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Riverside-San Bernardino-Ontario, CA", "Riverside, CA", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Sacramento-Roseville-Folsom, CA", "Sacramento, CA", Median_HH_Income$RegionName)

Median_HH_Income$RegionName <- gsub("San Diego-Chula Vista-Carlsbad, CA", "San Diego, CA", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("San Francisco-Oakland-Berkeley, CA", "San Francisco, CA", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("San Jose-Sunnyvale-Santa Clara, CA", "San Jose, CA", Median_HH_Income$RegionName)

Median_HH_Income$RegionName <- gsub("Seattle-Tacoma-Bellevue, WA", "Seattle, WA", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Tampa-St. Petersburg-Clearwater, FL", "Tampa, FL", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Virginia Beach-Norfolk-Newport News, VA-NC", "Virginia Beach, VA", Median_HH_Income$RegionName)


Median_HH_Income$RegionName <- gsub("Washington-Arlington-Alexandria, DC-VA-MD-WV", "Washington, DC", Median_HH_Income$RegionName)
Median_HH_Income$RegionName <- gsub("Worcester, MA-CT", "Worcester, MA", Median_HH_Income$RegionName)



```


```{r, echo = FALSE, message = FALSE}
Mortgage_Burden$RegionName <- gsub("Albany-Schenectady-Troy, NY", "Albany, NY", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Allentown-Bethlehem-Easton, PA-NJ", "Allentown, PA", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Atlanta-Sandy Springs-Alpharetta, GA", "Atlanta, GA", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Austin-Round Rock-Georgetown, TX", "	Austin, TX", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Baltimore-Columbia-Towson, MD", "Baltimore, MD", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Birmingham-Hoover, AL", "Birmingham, AL", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Boston-Cambridge-Newton, MA-NH", "Boston, MA", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Buffalo-Cheektowaga, NY", "Buffalo, NY", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Charleston-North Charleston, SC", "Charleston, SC", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Charlotte-Concord-Gastonia, NC-SC", "Charlotte, NC", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Chicago-Naperville-Elgin, IL-IN-WI", "Chicago, IL", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Cincinnati, OH-KY-IN", "Cincinnati, OH", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Cleveland-Elyria, OH", "Cleveland, OH", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Dallas-Fort Worth-Arlington, TX", "Dallas-Fort Worth, TX", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Dayton-Kettering, OH", "Dayton, OH", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Deltona-Daytona Beach-Ormond Beach, FL", "Daytona Beach, FL", Mortgage_Burden$RegionName)

Mortgage_Burden$RegionName <- gsub("Denver-Aurora-Lakewood, CO", "Denver, CO", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Des Moines-West Des Moines, IA", "Des Moines, IA", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Detroit-Warren-Dearborn, MI", "Detroit, MI", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Durham-Chapel Hill, NC", "Durham, NC", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Grand Rapids-Kentwood, MI", "Grand Rapids, MI", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Greensboro-High Point, NC", "Greensboro, NC", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Greenville-Anderson, SC", "Greenville, SC", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Hartford-East Hartford-Middletown, CT", "Hartford, CT", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Houston-The Woodlands-Sugar Land, TX", "Houston, TX", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Indianapolis-Carmel-Anderson, IN", "Indianapolis, IN", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Las Vegas-Henderson-Paradise, NV", "Las Vegas, NV", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Little Rock-North Little Rock-Conway, AR", "Little Rock, AR", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Louisville/Jefferson County, KY-IN", "Louisville-Jefferson County, KY", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Memphis, TN-MS-AR", "Memphis, TN", Mortgage_Burden$RegionName)

Mortgage_Burden$RegionName <- gsub("Memphis, TN-MS-AR", "Memphis, TN", Mortgage_Burden$RegionName)

Mortgage_Burden$RegionName <- gsub("Miami-Fort Lauderdale-Pompano Beach, FL", "Miami-Fort Lauderdale, FL", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Milwaukee-Waukesha, WI", "Milwaukee, WI", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Minneapolis-St. Paul-Bloomington, MN-WI", "Minneapolis-St Paul, MN", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Nashville-Davidson--Murfreesboro--Franklin, TN", "Nashville, TN", Mortgage_Burden$RegionName)

Mortgage_Burden$RegionName <- gsub("New Haven-Milford, CT", "New Haven, CT", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("New Orleans-Metairie, LA", "New Orleans, LA", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("New York-Newark-Jersey City, NY-NJ-PA", "New York, NY", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Ogden-Clearfield, UT", "Ogden, UT", Mortgage_Burden$RegionName)

Mortgage_Burden$RegionName <- gsub("Omaha-Council Bluffs, NE-IA", "Omaha, NE", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Orlando-Kissimmee-Sanford, FL", "Orlando, FL", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Philadelphia-Camden-Wilmington, PA-NJ-DE-MD", "Philadelphia, PA", Mortgage_Burden$RegionName)

Mortgage_Burden$RegionName <- gsub("Phoenix-Mesa-Chandler, AZ", "Phoenix, AZ", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Portland-South Portland, ME", "Portland, ME", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Providence-Warwick, RI-MA", "Providence, RI", Mortgage_Burden$RegionName)

Mortgage_Burden$RegionName <- gsub("Raleigh-Cary, NC", "Raleigh, NC", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Riverside-San Bernardino-Ontario, CA", "Riverside, CA", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Sacramento-Roseville-Folsom, CA", "Sacramento, CA", Mortgage_Burden$RegionName)

Mortgage_Burden$RegionName <- gsub("San Diego-Chula Vista-Carlsbad, CA", "San Diego, CA", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("San Francisco-Oakland-Berkeley, CA", "San Francisco, CA", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("San Jose-Sunnyvale-Santa Clara, CA", "San Jose, CA", Mortgage_Burden$RegionName)

Mortgage_Burden$RegionName <- gsub("Seattle-Tacoma-Bellevue, WA", "Seattle, WA", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Tampa-St. Petersburg-Clearwater, FL", "Tampa, FL", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Virginia Beach-Norfolk-Newport News, VA-NC", "Virginia Beach, VA", Mortgage_Burden$RegionName)


Mortgage_Burden$RegionName <- gsub("Washington-Arlington-Alexandria, DC-VA-MD-WV", "Washington, DC", Mortgage_Burden$RegionName)
Mortgage_Burden$RegionName <- gsub("Worcester, MA-CT", "Worcester, MA", Mortgage_Burden$RegionName)



```


#### Joining the datasets & filtering to variables needed

We joined our data set based on the re-coded MSA variables. 

```{r, echo = FALSE, message = FALSE}

data <-  left_join(Median_HH_Income, Mortgage_Burden) %>%
  left_join(ForSale_Inventory) %>%
  left_join(Median_List_Price) %>%
  left_join(Med_Sale_Price)


data <- data[ -c(3,4,6:12,15:26, 29:36) ]

#kable(head(data))
  


```


#### Filter out the NA Data

We filtered the data using the dyplr package and drop_na function. The Sales Price data had the fewest entries, so we filtered out the NA fields based on that column. 

```{r, , echo = FALSE, message = FALSE}


data <- data %>% drop_na(SaleP_Sep) 

```



```{r,  echo = FALSE, message = FALSE}
data$MortBurd_Quality <- factor(data$MortBurd_Quality, 
                         levels = c( "LessBurdened",
                                    "HighlyBurdened"))
```


#### Observations

There are 75 rows of data, this represents 75 Metropolitan Statistical Areas (MSA) and there are 8 variables in the columns, 4 of which are our variables for the regression analyses. The additional columns are the GEOID, and raw data from which we calculated our Categorical Variables. 






# Results

#### Model 1 - Sales Price vs. All Dependent Variables 


The model below is testing whether or not the Median Sale Price in an MSA's housing market is impacted by the housing market's for sale inventory, list price, rate of mortgage burdened homeowners, and whether or not it is a high median income MSA or a lower median income MSA.  

All variables are statistically significant. However, as highlighted from the data, the coefficient estimates are very small, ranging from -0.0000000000000003074 to 0.0000000001107. While our results are statistically significant, indicating a relationship among the variables, the impact is very small.It is not even a dollar difference between the variables. 

Furthermore, the multiple R-squared and adjusted R equal 1, and on the surface, it looks like it indicates that there is a strong correlation and relationship. But this relationship is skewed because the Median List Price (dependent variable) and Median Sales Price variable (independent variable) are directly correlated.

Therefore, we re-ran the regression analysis without the Median List Price variable to understand the true effect of the dependent variables on the Median Sales Prices in the MSAs. 

```{r,  echo = FALSE}
SaleP_model <- lm(SaleP_Sep ~ MedIncome_Quality + MortBurd_Quality + listP_Sep + Inv_Sep, data = data)

summary(SaleP_model)

```



#### Model 2 - Sales Price vs. All Dependent Variables except Median List Price


The model below is testing whether or not the Median Sale Price in an MSA's housing market is impacted by the housing market's for sale inventory, rate of mortgage burdened homeowners, and whether or not it is a high median income MSA or a lower median income MSA.  

MSAs that have a high rate of  mortgage burdened homeowners have a difference of$177,222  in Median Sales Price compared to less mortgage burdened MSAs. The relationship between Rate of Mortgage Burden in the MSA and the Median Sales Price was the only statistically significant relationship found in this model. 


```{r,  echo = FALSE}
SaleP_model2 <- lm(SaleP_Sep ~ MedIncome_Quality + MortBurd_Quality  + Inv_Sep, data = data)

summary(SaleP_model2)

```




#### Model Transformation: Means Centering Model 2

Our team is continuing to work with Model 2 because it had a statistically significant relationship and does not include the variable (Median List Price) that has a direct correlation to the independent variable. Below we transform our selected model to be means centered. In Model 2, we only have one variable that can be transformed, Housing Market For Sale Inventory, because it is our only continuous variable in this model. Means centering will take the average for sale inventory size (8,336 housing units) and will center each MSA's for sale inventory above or below that. 

```{r, echo = FALSE}
full_model <- SaleP_model2 <- lm(SaleP_Sep ~ MedIncome_Quality + MortBurd_Quality  + Inv_Sep, data = data)

summary(full_model)
```


```{r, echo = FALSE, message = FALSE}

mean(data$Inv_Sep, na.rm = TRUE)

centered_data <- data %>%
  mutate(Inv_Sep = Inv_Sep - mean(Inv_Sep, na.rm=TRUE))

centered_model <- lm(SaleP_Sep ~ MedIncome_Quality + MortBurd_Quality  + Inv_Sep, centered_data)

coeff_names <- c("Constant" = "(Intercept)",
                 "Highly Mortgage Burdened" =
                   "MortBurd_QualityHighlyBurdened",
                  "Monthly For sale inventory" = "Inv_Sep",
                 "Low Median Household Income" = "MedIncome_QualityLow")

export_summs(full_model, centered_model, 
             error_format = "(p = {p.value})",
             error_pos = "same",
             model.names = c("Initial", "Centered"),
                coefs = coeff_names)
          
```



The initial model had a y-intercept of $266,812, meaning that if no homes were listed for sale, (inventory equals zero) than the median sales price would be $266,812. However, an inventory of zero would mean that there is no activity in the housing market, and if no homes are listed for sale, than none would be sold. Therefore it's impossible to have a median sales price when no sales are transacting. 

After a means centered transformation, the new regression model has a median sales price of $284,302 based on the average sized inventory. The average housing inventory size is 8,336 homes.  As expected, the R value, relationship fit and coefficient values do not change as only the data has been transformed to have a more meaningful interpretation. 


The means centered transformation worked best for our model because the data was already at a scale that made sense and was able to be interpreted. Furthermore, the variables have a small direct relationship, so a non-linear transformation would not have positively impacted the fit of the model. 




```{r,  echo = FALSE, message = FALSE}
effect_plot(centered_model, pred = Inv_Sep, interval = TRUE) +
  scale_y_continuous(name = "Median Sales Price + Socioeconomic determinants") +
                     # breaks = breaks <- seq(0, 700000, by = 100000), 
                     # labels = prettyNum(breaks*100, big.mark = ",")) +
  scale_x_continuous(name = "Inventory Size")
  

```






# Interaction Model 



Based on the means centered model, we see that higher median ages are correlated with larger for sale housing inventories. Controlling for the inventory size we can see if highly Homeowner Housing Burdened MSAs have a higher median sales price or a lower one. 
Does the relationship between inventory size and median sale price change based on an MSA's housing burden rate? 



##### How does Housing Burden impact Sale Price in an MSA? 
```{r,  echo = FALSE, message = FALSE}
interaction_model <- lm(SaleP_Sep ~ Inv_Sep + MedIncome_Quality + MortBurd_Quality  + Inv_Sep*MortBurd_Quality, centered_data)

export_summs(centered_model, interaction_model,
             error_format = "(p = {p.value})",
             error_pos = "same",
             model.names = c("Centered Model",
                             "Interaction Model"),
              coefs = coeff_names)



summary(interaction_model)

#  lm(covid_rate ~ med_age_10 + log(pop_dens, base = 2) + majority_vote + type + med_age_10*majority_vote, centered_data_scaled_log)

#the interaction is med_age_10*majority_vote
```



The model fit improved minimally, with the correlation increasing from 0.27 to 0.28. The significance remains the same. In the plot, however, the difference between less housing burdened and more housing burdened MSAs is apparent.The less burdened MSAs have a wide range, suggesting that there is a weaker correlation between the variables. While the higher burdened MSAs have a closer range,  suggesting that there is a stronger correlation between median sales price and for sale inventory size in highly housing burdened MSAs.  

```{r,  echo = FALSE, message = FALSE}
interact_plot(interaction_model, pred = Inv_Sep, modx = MortBurd_Quality,
              interval = TRUE) +
  scale_x_continuous(name = "for sale housing inventory") +
  scale_y_continuous(name = "median sales price")




```


